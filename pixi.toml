[project]
name = "voicevox-ros2"
version = "0.1.0"
description = "ROS 2 + VOICEVOX TTS (playback) in a pixi environment"
channels = ["robostack-staging", "conda-forge"]
platforms = ["linux-64"]

[dependencies]
ros-humble-desktop-full = ">=0.10.0,<0.11"
colcon-common-extensions = ">=0.3.0,<0.4"
setuptools = "<=58.2.0"
#python = "3.12.*"
numpy = "*"
portaudio = "*"

[host-dependencies]
pip = "*"

[pypi-dependencies]
sounddevice = "*"
pyyaml = "*"


[tasks]
# 1) VOICEVOX のエンジン資産（ONNX Runtime / OpenJTalk 辞書 / モデル）を取得
get_assets = "bash scripts/get_voicevox_assets.sh"

# 2) VOICEVOX の Python ホイールをインストール（CPU版の例）
install_voicevox = "python -m pip install --no-input voicevox_core-0.16.2-cp310-abi3-manylinux_2_34_x86_64.whl"

# 3) ノード起動
run = { cmd = "python src/voicevox_tts_node.py", env = { PYTHONPATH = "/opt/ros/jazzy/lib/python3.12/site-packages:${PYTHONPATH}" } }

# 4) テスト送信
say = "ros2 topic pub -1 /voicevox_tts std_msgs/String '{data: \"おはようございます。私はボイスボックスです。\"}'"

